<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Paper Dashboard | Editor</title>
  <link rel="icon" type="image/png" href="../../assets/img/favicon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../assets/app.css">
  <link rel="stylesheet" href="../../assets/nucleo.css">
  <script defer src="../../assets/app.js"></script>
  <script defer src="../../assets/editor.js"></script>
  <script defer src="../../assets/editor-dnd.js"></script>
  <script defer src="../../assets/alpine.js"></script>
  <script>
  window.addEventListener('DOMContentLoaded', () => {
    if (!window.Alpine) {
      const script = document.createElement('script');
      script.defer = true;
      script.src = 'https://cdn.jsdelivr.net/npm/alpinejs@3.13.5/dist/cdn.min.js';
      document.head.appendChild(script);
    }
  });
</script>
</head>
<body data-page="editor" x-data="layout()" class="text-[var(--paper-text)] antialiased">
  <div class="flex min-h-screen">
    <div class="fixed inset-0 bg-black/40 lg:hidden" x-show="sidebarOpen" x-transition.opacity @click="sidebarOpen = false"></div>
    <!-- Sidebar -->
    <aside class="sidebar-modern fixed inset-y-0 left-0 z-40 w-64 -translate-x-full bg-[var(--paper-sidebar)] text-white transition-all duration-300 lg:static lg:translate-x-0 lg:flex lg:flex-col" :class="{'translate-x-0': sidebarOpen, '-translate-x-full': !sidebarOpen, 'sidebar-mini': sidebarMini}">
      <!-- Logo -->
      <div class="px-6 py-6">
        <div class="flex items-center gap-3">
          <div class="flex h-11 w-11 shrink-0 items-center justify-center rounded-full bg-white/10">
            <img src="../../assets/img/logo-small.png" alt="Paper Dashboard logo" class="h-7 w-7">
          </div>
          <div class="sidebar-text overflow-hidden whitespace-nowrap transition-all duration-300">
            <p class="text-sm font-semibold uppercase tracking-[0.2em]">Paper</p>
            <p class="text-xs text-white/60">Tailwind 4.1</p>
          </div>
        </div>
      </div>

      <!-- Navigation -->
      <nav class="flex-1 overflow-y-auto px-3 pb-6">
        <a class="sidebar-link" href="../dashboard.html">
          <i class="nc-icon nc-bank shrink-0"></i>
          <span class="sidebar-text">Dashboard</span>
        </a>

        <div x-data="collapse(true)" class="mt-2">
          <button class="sidebar-link" type="button" @click="toggle()">
            <i class="nc-icon nc-book-bookmark shrink-0"></i>
            <span class="sidebar-text">Pages</span>
            <i class="nc-icon nc-minimal-down ml-auto text-xs transition-transform shrink-0" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="sidebar-submenu mt-1 ml-4 space-y-1 border-l border-white/20 pl-4" x-show="open" x-transition x-cloak>
            <a class="sidebar-sublink active" data-editor-link="page" href="editor.html#type=page">Page Editor</a>
            <a class="sidebar-sublink" href="timeline.html">Timeline</a>
            <a class="sidebar-sublink" href="login.html">Login</a>
            <a class="sidebar-sublink" href="register.html">Register</a>
            <a class="sidebar-sublink" href="lock.html">Lock Screen</a>
            <a class="sidebar-sublink" href="user.html">User Profile</a>
            <a class="sidebar-sublink" href="blog-2col.html">Blog Two Column</a>
            <a class="sidebar-sublink" href="blog-3col.html">Blog Three Column</a>
            <a class="sidebar-sublink" href="blog-widescreen.html">Blog Widescreen</a>
            <a class="sidebar-sublink" href="magazine.html">Magazine</a>
          </div>
        </div>

        <div x-data="collapse(false)" class="mt-2">
          <button class="sidebar-link" type="button" @click="toggle()">
            <i class="nc-icon nc-paper-2 shrink-0"></i>
            <span class="sidebar-text">Posts</span>
            <i class="nc-icon nc-minimal-down ml-auto text-xs transition-transform shrink-0" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="sidebar-submenu mt-1 ml-4 space-y-1 border-l border-white/20 pl-4" x-show="open" x-transition x-cloak>
            <a class="sidebar-sublink" data-editor-link="post" href="editor.html#type=post">Post Editor</a>
          </div>
        </div>

        <div x-data="collapse(false)" class="mt-2">
          <button class="sidebar-link" type="button" @click="toggle()">
            <i class="nc-icon nc-globe shrink-0"></i>
            <span class="sidebar-text">Site</span>
            <i class="nc-icon nc-minimal-down ml-auto text-xs transition-transform shrink-0" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="sidebar-submenu mt-1 ml-4 space-y-1 border-l border-white/20 pl-4" x-show="open" x-transition x-cloak>
            <a class="sidebar-sublink" data-editor-link="site" href="editor.html#type=site">Site Editor</a>
          </div>
        </div>

        <div x-data="collapse(false)" class="mt-2">
          <button class="sidebar-link" type="button" @click="toggle()">
            <i class="nc-icon nc-layout-11 shrink-0"></i>
            <span class="sidebar-text">Components</span>
            <i class="nc-icon nc-minimal-down ml-auto text-xs transition-transform shrink-0" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="sidebar-submenu mt-1 ml-4 space-y-1 border-l border-white/20 pl-4" x-show="open" x-transition x-cloak>
            <a class="sidebar-sublink" href="../components/buttons.html">Buttons</a>
            <a class="sidebar-sublink" href="../components/grid.html">Grid System</a>
            <a class="sidebar-sublink" href="../components/panels.html">Panels</a>
            <a class="sidebar-sublink" href="../components/notifications.html">Notifications</a>
            <a class="sidebar-sublink" href="../components/icons.html">Icons</a>
            <a class="sidebar-sublink" href="../components/typography.html">Typography</a>
          </div>
        </div>

        <div x-data="collapse(false)" class="mt-2">
          <button class="sidebar-link" type="button" @click="toggle()">
            <i class="nc-icon nc-ruler-pencil shrink-0"></i>
            <span class="sidebar-text">Forms</span>
            <i class="nc-icon nc-minimal-down ml-auto text-xs transition-transform shrink-0" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="sidebar-submenu mt-1 ml-4 space-y-1 border-l border-white/20 pl-4" x-show="open" x-transition x-cloak>
            <a class="sidebar-sublink" href="../forms/regular.html">Regular Forms</a>
            <a class="sidebar-sublink" href="../forms/extended.html">Extended Forms</a>
            <a class="sidebar-sublink" href="../forms/validation.html">Validation</a>
            <a class="sidebar-sublink" href="../forms/wizard.html">Wizard</a>
          </div>
        </div>

        <div x-data="collapse(false)" class="mt-2">
          <button class="sidebar-link" type="button" @click="toggle()">
            <i class="nc-icon nc-single-copy-04 shrink-0"></i>
            <span class="sidebar-text">Tables</span>
            <i class="nc-icon nc-minimal-down ml-auto text-xs transition-transform shrink-0" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="sidebar-submenu mt-1 ml-4 space-y-1 border-l border-white/20 pl-4" x-show="open" x-transition x-cloak>
            <a class="sidebar-sublink" href="../tables/regular.html">Regular Tables</a>
            <a class="sidebar-sublink" href="../tables/extended.html">Extended Tables</a>
            <a class="sidebar-sublink" href="../tables/datatables.html">DataTables</a>
          </div>
        </div>

        <div x-data="collapse(false)" class="mt-2">
          <button class="sidebar-link" type="button" @click="toggle()">
            <i class="nc-icon nc-pin-3 shrink-0"></i>
            <span class="sidebar-text">Maps</span>
            <i class="nc-icon nc-minimal-down ml-auto text-xs transition-transform shrink-0" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="sidebar-submenu mt-1 ml-4 space-y-1 border-l border-white/20 pl-4" x-show="open" x-transition x-cloak>
            <a class="sidebar-sublink" href="../maps/google.html">Google Maps</a>
            <a class="sidebar-sublink" href="../maps/fullscreen.html">Full Screen Map</a>
            <a class="sidebar-sublink" href="../maps/vector.html">Vector Map</a>
          </div>
        </div>

        <a class="sidebar-link mt-2" href="../widgets.html">
          <i class="nc-icon nc-box shrink-0"></i>
          <span class="sidebar-text">Widgets</span>
        </a>
        <a class="sidebar-link" href="../charts.html">
          <i class="nc-icon nc-chart-bar-32 shrink-0"></i>
          <span class="sidebar-text">Charts</span>
        </a>
        <a class="sidebar-link" href="../calendar.html">
          <i class="nc-icon nc-calendar-60 shrink-0"></i>
          <span class="sidebar-text">Calendar</span>
        </a>
      </nav>

      <!-- Help card -->
      <div class="sidebar-help px-6 pb-6">
        <div class="rounded-2xl bg-white/10 p-4 text-sm">
          <p class="text-xs uppercase tracking-[0.2em] text-white/60">Need help?</p>
          <p class="mt-2 text-white/80">Explore the docs or reach out to support.</p>
          <a href="../docs/index.html" class="mt-3 block w-full rounded-full bg-[var(--paper-primary)] px-4 py-2 text-center text-xs font-semibold uppercase tracking-wider text-white transition hover:bg-[var(--paper-primary)]/80">View docs</a>
        </div>
      </div>
    </aside>
    <div class="flex min-h-screen flex-1 flex-col">
      <header class="sticky top-0 z-30 bg-[var(--paper-bg)]/90 backdrop-blur">
        <div class="flex items-center justify-between px-6 py-4">
          <div class="flex items-center gap-3">
            <button class="flex h-10 w-10 flex-col items-center justify-center gap-1 rounded-full bg-white/70 text-[var(--paper-text)] shadow lg:hidden" type="button" @click="sidebarOpen = !sidebarOpen" aria-label="Toggle navigation">
              <span class="h-0.5 w-5 rounded-full bg-[var(--paper-text)]"></span>
              <span class="h-0.5 w-5 rounded-full bg-[var(--paper-text)]"></span>
              <span class="h-0.5 w-5 rounded-full bg-[var(--paper-text)]"></span>
            </button>
            <!-- Sidebar minimize toggle (desktop only) -->
            <button class="hidden lg:flex h-10 w-10 items-center justify-center rounded-full bg-white shadow transition hover:shadow-md" type="button" @click="sidebarMini = !sidebarMini" aria-label="Toggle sidebar">
              <i class="nc-icon nc-minimal-left text-[var(--paper-text)] transition-transform duration-300" :class="sidebarMini ? 'rotate-180' : ''"></i>
            </button>
            <div class="relative hidden md:block">
              <i class="nc-icon nc-zoom-split absolute left-3 top-1/2 -translate-y-1/2 text-sm text-[var(--paper-muted)]"></i>
              <input class="h-10 w-64 rounded-full border border-[var(--paper-border)] bg-white pl-9 pr-4 text-sm outline-none transition focus:border-[var(--paper-primary)] focus:ring-2 focus:ring-[var(--paper-primary)]/20" type="text" placeholder="Search...">
            </div>
            <div class="md:hidden">
              <p class="text-sm font-semibold">Paper Dashboard</p>
              <p class="text-xs text-[var(--paper-muted)]">Overview</p>
            </div>
          </div>
          <div class="flex items-center gap-3">
            <div class="relative" @click.outside="notificationsOpen = false">
              <button class="flex h-10 w-10 items-center justify-center rounded-full bg-white/70 text-[var(--paper-text)] shadow" type="button" @click="notificationsOpen = !notificationsOpen" aria-label="Notifications">
                <i class="nc-icon nc-bell-55"></i>
              </button>
              <span class="absolute -right-1 -top-1 h-2.5 w-2.5 rounded-full bg-[var(--paper-danger)]"></span>
              <div class="absolute right-0 mt-3 w-72 paper-card p-4 text-sm shadow-lg" x-show="notificationsOpen" x-transition>
                <p class="paper-label">Notifications</p>
                <div class="mt-3 space-y-3">
                  <div class="flex items-start gap-3">
                    <div class="mt-1 flex h-8 w-8 items-center justify-center rounded-full bg-[rgba(239,129,87,0.2)] text-[var(--paper-danger)]">
                      <i class="nc-icon nc-alert-circle-i text-sm"></i>
                    </div>
                    <div>
                      <p class="font-semibold">Server update</p>
                      <p class="text-xs text-[var(--paper-muted)]">New patches deployed 2m ago.</p>
                    </div>
                  </div>
                  <div class="flex items-start gap-3">
                    <div class="mt-1 flex h-8 w-8 items-center justify-center rounded-full bg-[rgba(81,188,218,0.2)] text-[var(--paper-info)]">
                      <i class="nc-icon nc-email-85 text-sm"></i>
                    </div>
                    <div>
                      <p class="font-semibold">Inbox cleared</p>
                      <p class="text-xs text-[var(--paper-muted)]">4 new messages archived.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="relative" @click.outside="profileMenuOpen = false">
              <button class="flex items-center gap-3 rounded-full bg-white/70 px-2 py-1 shadow" type="button" @click="profileMenuOpen = !profileMenuOpen">
                <img src="../../assets/img/faces/ayo-ogunseinde-2.jpg" alt="Chet Faker" class="h-8 w-8 rounded-full object-cover">
                <span class="hidden text-sm font-semibold md:inline">Chet Faker</span>
                <i class="nc-icon nc-minimal-down text-xs text-[var(--paper-muted)]"></i>
              </button>
              <div class="absolute right-0 mt-3 w-44 paper-card p-3 text-sm shadow-lg" x-show="profileMenuOpen" x-transition>
                <a href="#" class="block rounded-lg px-2 py-1 hover:bg-[rgba(0,0,0,0.04)]">Profile</a>
                <a href="#" class="block rounded-lg px-2 py-1 hover:bg-[rgba(0,0,0,0.04)]">Settings</a>
                <a href="#" class="block rounded-lg px-2 py-1 hover:bg-[rgba(0,0,0,0.04)]">Logout</a>
              </div>
            </div>
          </div>
        </div>
      </header>
      <main class="flex-1 px-6 pb-12">

<section class="pt-6" x-data="editor()" x-init="init()" @keydown.window="handleKeydown($event)">
  <div class="flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between">
    <div>
      <h1 class="text-2xl font-semibold">Editor</h1>
      <p class="text-sm text-[var(--paper-muted)]">Block-based editing workspace</p>
    </div>
    <div class="flex items-center gap-3 text-xs text-[var(--paper-muted)]">
      <span class="rounded-full bg-[var(--paper-bg)] px-3 py-1" x-show="isSaving">Saving...</span>
      <span x-show="!isSaving">Saved <span x-text="lastSaved || 'just now'"></span></span>
      <button class="paper-btn paper-btn-outline" type="button" @click.stop="toggleSettings()">Settings</button>
      <button class="paper-btn paper-btn-primary" type="button" @click.stop="save('manual')">Update</button>
    </div>
  </div>

  <div class="mt-6 flex flex-col gap-6 lg:flex-row">
    <div class="space-y-6 lg:w-[70%]" @click="clearSelection()">
      <div class="paper-card p-6" @click.stop>
        <label class="paper-label">Page title</label>
        <input
          class="mt-2 w-full bg-transparent text-3xl font-semibold outline-none placeholder:text-[var(--paper-muted)]"
          type="text"
          placeholder="Add title"
          x-model="doc.title"
          @blur="save('title')"
          @input="queueSave()"
        >
        <div class="mt-2 flex items-center justify-between text-xs text-[var(--paper-muted)]">
          <span x-text="titleHint"></span>
          <span x-text="doc.title.length + ' / 120'"></span>
        </div>
      </div>

      <div class="paper-card p-6" @click.stop>
        <div class="flex flex-wrap items-center gap-2 border-b border-[var(--paper-border)] pb-4">
          <div class="relative" @click.outside="ui.inserterOpen = false">
            <button class="paper-btn paper-btn-outline" type="button" @click.stop="ui.inserterOpen = !ui.inserterOpen">+ Add Block</button>
            <div class="absolute left-0 top-full z-20 mt-2 w-64 rounded-xl bg-white p-3 text-sm shadow-lg" x-show="ui.inserterOpen" x-transition>
              <p class="paper-label px-2">Text</p>
              <button class="mt-2 w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="addBlock('heading')">Heading</button>
              <button class="w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="addBlock('paragraph')">Paragraph</button>
              <button class="w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="addBlock('list')">List</button>
              <button class="w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="addBlock('quote')">Quote</button>
              <p class="paper-label mt-3 px-2">Media</p>
              <button class="mt-2 w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="addBlock('image')">Image</button>
              <button class="w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="addBlock('gallery')">Gallery</button>
              <button class="w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="addBlock('video')">Video</button>
              <p class="paper-label mt-3 px-2">Design</p>
              <button class="mt-2 w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="addBlock('buttons')">Buttons</button>
              <button class="w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="addBlock('columns')">Columns</button>
              <button class="w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="addBlock('separator')">Separator</button>
              <button class="w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="addBlock('spacer')">Spacer</button>
              <p class="paper-label mt-3 px-2">Widgets</p>
              <button class="mt-2 w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="addBlock('shortcode')">Shortcode</button>
              <button class="w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="addBlock('html')">Custom HTML</button>
            </div>
          </div>
          <button class="paper-btn paper-btn-ghost" type="button" @click.stop="ui.listView = !ui.listView">
            <i class="nc-icon nc-bullet-list-67 text-xs"></i>
            <span>List View</span>
          </button>
          <button class="paper-btn paper-btn-ghost" type="button" @click.stop="undo()" :disabled="editorState.historyIndex <= 0">
            <i class="nc-icon nc-minimal-left text-xs"></i>
            <span>Undo</span>
          </button>
          <button class="paper-btn paper-btn-ghost" type="button" @click.stop="redo()" :disabled="editorState.historyIndex >= editorState.history.length - 1">
            <i class="nc-icon nc-minimal-right text-xs"></i>
            <span>Redo</span>
          </button>
          <button class="paper-btn" :class="ui.isPreview ? 'paper-btn-primary' : 'paper-btn-outline'" type="button" @click.stop="togglePreview()">
            <i class="nc-icon nc-zoom-split text-xs"></i>
            <span x-text="ui.isPreview ? 'Previewing' : 'Preview'"></span>
          </button>
        </div>

        <div class="mt-4">
          <div class="rounded-xl border border-dashed border-[var(--paper-border)] bg-[var(--paper-bg)] p-8 text-center text-sm text-[var(--paper-muted)]" x-show="blocks.length === 0">
            Start by adding a block or type '/' to insert
          </div>

          <div class="rounded-xl border border-[var(--paper-border)] bg-[var(--paper-bg)] p-4 mb-4" x-show="ui.listView">
            <p class="paper-label">List view</p>
            <div class="mt-3 space-y-2">
              <template x-for="(block, index) in blocks" :key="block.id">
                <button
                  class="flex w-full items-center justify-between rounded-lg px-3 py-2 text-left text-sm transition hover:bg-white"
                  type="button"
                  @click.stop="selectBlock(block.id)"
                >
                  <span class="flex items-center gap-2">
                    <i class="nc-icon text-xs" :class="blockIcon(block.type)"></i>
                    <span x-text="blockLabel(block.type)"></span>
                  </span>
                  <span class="text-xs text-[var(--paper-muted)]" x-text="index + 1"></span>
                </button>
              </template>
            </div>
          </div>

          <div
            class="paper-dropzone mb-3"
            x-show="isDragging"
            x-cloak
            :class="dropzoneClass(0)"
            @dragenter.prevent="dragOver(0, $event)"
            @dragover.prevent="dragOver(0, $event)"
            @dragleave="dragLeave(0)"
            @drop.prevent="dropAt(0)"
          ></div>

          <template x-for="(block, index) in blocks" :key="block.id">
            <div :class="index === 0 ? '' : 'mt-4'">
              <div
                class="group relative rounded-xl border border-transparent bg-white p-4 transition"
                :class="[isSelected(block.id) ? 'border-[var(--paper-danger)]/40 ring-2 ring-[var(--paper-danger)]/20' : 'hover:border-[var(--paper-border)]', draggingId === block.id ? 'opacity-60' : '']"
                @click.stop="selectBlock(block.id)"
                draggable="true"
                @dragstart.stop="maybeStartDrag(block.id, $event)"
                @dragover.prevent="dragOverBlock(index, $event)"
                @drop.prevent="dropAt(dragOverIndex !== null ? dragOverIndex : index)"
                @dragend="endDrag()"
              >
                <div class="absolute left-3 top-3 flex items-center gap-2 text-[var(--paper-muted)]" x-show="!ui.isPreview">
                  <div
                    class="paper-drag-handle flex h-7 w-7 items-center justify-center rounded-full border border-[var(--paper-border)] bg-white text-xs"
                    role="button"
                    tabindex="0"
                    @mousedown.stop="armDrag()"
                    @mouseup="disarmDrag()"
                    @mouseleave="disarmDrag()"
                    @click.stop
                    title="Drag to reorder"
                    aria-label="Drag to reorder"
                  >
                    <i class="nc-icon nc-bullet-list-67"></i>
                  </div>
                </div>
                <div class="absolute right-3 top-3 flex items-center gap-2 opacity-0 transition group-hover:opacity-100" :class="isSelected(block.id) ? 'opacity-100' : ''" x-show="!ui.isPreview">
                  <button class="flex h-7 w-7 items-center justify-center rounded-full border border-[var(--paper-border)] bg-white text-xs" type="button" @click.stop="toggleBlockMenu(block.id)">
                    <i class="nc-icon nc-minimal-down"></i>
                  </button>
                  <div class="absolute right-0 top-9 z-20 w-48 rounded-xl bg-white p-2 text-sm shadow-lg" x-show="blockMenuId === block.id" x-transition @click.outside="blockMenuId = null">
                    <button class="w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="duplicateBlock(block.id)">Duplicate</button>
                    <button class="w-full rounded-lg px-3 py-2 text-left hover:bg-[var(--paper-bg)]" type="button" @click="deleteBlock(block.id)">Delete</button>
                  </div>
                </div>
                <div class="ml-0" :class="ui.isPreview ? '' : 'sm:ml-10'">
                  <div class="flex items-center gap-2 text-xs text-[var(--paper-muted)]">
                    <i class="nc-icon text-xs" :class="blockIcon(block.type)"></i>
                    <span x-text="blockLabel(block.type)"></span>
                  </div>

                  <div class="mt-3">
                    <template x-if="block.type === 'heading'">
                      <div
                        class="outline-none"
                        :class="[textAlignClass(block.settings.alignment), headingSizeClass(block.settings.level), textColorClass(block.settings.textColor)]"
                        :contenteditable="!ui.isPreview"
                        @input="updateBlockContent(block.id, $event.target.innerText)"
                        @blur="commitHistory()"
                        x-text="block.content"
                      ></div>
                    </template>
                    <template x-if="block.type === 'paragraph'">
                      <div
                        class="outline-none"
                        :class="[textAlignClass(block.settings.alignment), textSizeClass(block.settings.fontSize), textColorClass(block.settings.textColor), lineHeightClass(block.settings.lineHeight)]"
                        :contenteditable="!ui.isPreview"
                        @input="updateBlockContent(block.id, $event.target.innerText)"
                        @blur="commitHistory()"
                        x-text="block.content"
                      ></div>
                    </template>
                    <template x-if="block.type === 'list'">
                      <ul class="list-disc space-y-2 pl-5 text-sm" :class="textColorClass(block.settings.textColor)">
                        <template x-for="item in listItems(block)" :key="item">
                          <li x-text="item"></li>
                        </template>
                      </ul>
                    </template>
                    <template x-if="block.type === 'quote'">
                      <blockquote class="border-l-4 border-[var(--paper-danger)]/50 pl-4 text-sm italic text-[var(--paper-text)]">
                        <div
                          class="outline-none"
                          :contenteditable="!ui.isPreview"
                          @input="updateBlockContent(block.id, $event.target.innerText)"
                          @blur="commitHistory()"
                          x-text="block.content"
                        ></div>
                        <cite class="mt-3 block text-xs text-[var(--paper-muted)]" x-text="block.settings.citation"></cite>
                      </blockquote>
                    </template>
                    <template x-if="block.type === 'image'">
                      <div class="space-y-2">
                        <img
                          class="h-56 w-full rounded-xl object-cover"
                          :class="imageAlignClass(block.settings.alignment)"
                          :src="block.content"
                          alt="Image block"
                        >
                        <p class="text-xs text-[var(--paper-muted)]" x-text="block.settings.caption"></p>
                      </div>
                    </template>
                    <template x-if="block.type === 'gallery'">
                      <div class="grid gap-3" :style="galleryGridStyle(block.settings.columns)">
                        <template x-for="image in block.settings.images" :key="image">
                          <img class="h-28 w-full rounded-xl object-cover" :src="image" alt="Gallery image">
                        </template>
                      </div>
                    </template>
                    <template x-if="block.type === 'video'">
                      <div class="flex items-center justify-between rounded-xl border border-[var(--paper-border)] bg-[var(--paper-bg)] p-4">
                        <div>
                          <p class="text-sm font-semibold">Video embed</p>
                          <p class="text-xs text-[var(--paper-muted)]" x-text="block.content"></p>
                        </div>
                        <div class="flex h-10 w-10 items-center justify-center rounded-full bg-[var(--paper-danger)]/10 text-[var(--paper-danger)]">
                          <i class="nc-icon nc-button-play"></i>
                        </div>
                      </div>
                    </template>
                    <template x-if="block.type === 'buttons'">
                      <div class="flex flex-wrap gap-3">
                        <button class="paper-btn" :class="block.settings.variant === 'primary' ? 'paper-btn-primary' : 'paper-btn-outline'" type="button" x-text="block.content"></button>
                        <button class="paper-btn paper-btn-outline" type="button">Secondary action</button>
                      </div>
                    </template>
                    <template x-if="block.type === 'columns'">
                      <div class="grid gap-4" :style="columnGridStyle(block.settings.columnCount)">
                        <template x-for="(column, colIndex) in columnItems(block)" :key="colIndex">
                          <div class="rounded-xl border border-[var(--paper-border)] bg-[var(--paper-bg)] p-4 text-xs text-[var(--paper-muted)]">
                            <p class="text-sm font-semibold text-[var(--paper-text)]">Column <span x-text="colIndex + 1"></span></p>
                            <p class="mt-2" x-text="column"></p>
                          </div>
                        </template>
                      </div>
                    </template>
                    <template x-if="block.type === 'separator'">
                      <div class="border-t border-[var(--paper-border)]"></div>
                    </template>
                    <template x-if="block.type === 'spacer'">
                      <div class="rounded-lg border border-dashed border-[var(--paper-border)] bg-[var(--paper-bg)]" :style="'height: ' + block.settings.height + 'px'"></div>
                    </template>
                    <template x-if="block.type === 'shortcode'">
                      <div class="rounded-xl border border-[var(--paper-border)] bg-[var(--paper-bg)] p-4 text-xs text-[var(--paper-muted)]" x-text="block.content"></div>
                    </template>
                    <template x-if="block.type === 'html'">
                      <pre class="rounded-xl border border-[var(--paper-border)] bg-[var(--paper-bg)] p-4 text-xs text-[var(--paper-muted)]" x-text="block.content"></pre>
                    </template>
                  </div>
                </div>
              </div>
              <div
                class="paper-dropzone mt-3"
                x-show="isDragging"
                x-cloak
                :class="dropzoneClass(index + 1)"
                @dragenter.prevent="dragOver(index + 1, $event)"
                @dragover.prevent="dragOver(index + 1, $event)"
                @dragleave="dragLeave(index + 1)"
                @drop.prevent="dropAt(index + 1)"
              ></div>
            </div>
          </template>
        </div>
      </div>
    </div>

    <aside class="lg:w-[30%] paper-editor-sidebar" :class="ui.settingsOpen ? 'block' : 'hidden lg:block'">
      <div class="paper-card p-4">
        <div class="flex items-start justify-between gap-3">
          <div class="flex items-center gap-3">
            <div class="flex h-10 w-10 items-center justify-center rounded-full bg-[var(--paper-danger)]/10 text-[var(--paper-danger)]">
              <i class="nc-icon" :class="sidebarIcon"></i>
            </div>
            <div>
              <p class="text-xs uppercase tracking-[0.2em] text-[var(--paper-muted)]">Settings</p>
              <p class="text-sm font-semibold" x-text="sidebarTitle"></p>
            </div>
          </div>
          <button class="text-xs text-[var(--paper-muted)]" type="button" @click="ui.settingsOpen = false">Hide</button>
        </div>
        <p class="mt-3 text-xs text-[var(--paper-muted)]" x-text="sidebarHint"></p>
      </div>

      <div class="mt-4 space-y-4" x-show="ui.sidebarMode === 'document'" x-transition>
        <div class="paper-card" x-data="collapse(true)">
          <button class="paper-card-header flex w-full items-center justify-between" type="button" @click="toggle()">
            <span class="font-semibold">General</span>
            <i class="nc-icon nc-minimal-down text-xs transition-transform" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="paper-card-body space-y-4" x-show="open" x-transition>
            <div>
              <label class="paper-label">Status</label>
              <select class="paper-select" x-model="doc.status">
                <option value="draft">Draft</option>
                <option value="published">Published</option>
                <option value="private">Private</option>
              </select>
            </div>
            <div>
              <label class="paper-label">Visibility</label>
              <select class="paper-select" x-model="doc.visibility">
                <option value="public">Public</option>
                <option value="password">Password protected</option>
              </select>
            </div>
            <div>
              <label class="paper-label">Publish date</label>
              <input class="paper-input" type="datetime-local" x-model="doc.publishAt">
            </div>
          </div>
        </div>

        <div class="paper-card" x-data="collapse(false)">
          <button class="paper-card-header flex w-full items-center justify-between" type="button" @click="toggle()">
            <span class="font-semibold">Categories & Tags</span>
            <i class="nc-icon nc-minimal-down text-xs transition-transform" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="paper-card-body space-y-4" x-show="open" x-transition>
            <div>
              <p class="paper-label">Categories</p>
              <div class="mt-2 space-y-2">
                <template x-for="category in availableCategories" :key="category">
                  <label class="flex items-center gap-2 text-sm">
                    <input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-[var(--paper-danger)]" :checked="doc.meta.categories.includes(category)" @change="toggleCategory(category)">
                    <span x-text="category"></span>
                  </label>
                </template>
              </div>
            </div>
            <div>
              <p class="paper-label">Tags</p>
              <div class="mt-2 flex items-center gap-2">
                <input class="paper-input" type="text" placeholder="Add tag" x-model="tagInput" @keydown.enter.prevent="addTag()">
                <button class="paper-btn paper-btn-outline" type="button" @click="addTag()">Add</button>
              </div>
              <div class="mt-3 flex flex-wrap gap-2">
                <template x-for="tag in doc.meta.tags" :key="tag">
                  <span class="paper-pill bg-[var(--paper-bg)] text-[var(--paper-text)]">
                    <span x-text="tag"></span>
                    <button class="text-[var(--paper-muted)]" type="button" @click="removeTag(tag)">x</button>
                  </span>
                </template>
              </div>
            </div>
          </div>
        </div>

        <div class="paper-card" x-data="collapse(false)">
          <button class="paper-card-header flex w-full items-center justify-between" type="button" @click="toggle()">
            <span class="font-semibold">Featured Image</span>
            <i class="nc-icon nc-minimal-down text-xs transition-transform" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="paper-card-body space-y-4" x-show="open" x-transition>
            <div class="rounded-xl border border-dashed border-[var(--paper-border)] bg-[var(--paper-bg)] p-4 text-center" x-show="!doc.meta.featuredImage">
              <p class="text-sm text-[var(--paper-muted)]">Upload or choose a sample image</p>
              <div class="mt-3 grid grid-cols-3 gap-2">
                <button type="button" @click="setFeaturedImage('../../assets/img/bg/ben-white.jpg')">
                  <img class="h-16 w-full rounded-lg object-cover" src="../../assets/img/bg/ben-white.jpg" alt="Sample">
                </button>
                <button type="button" @click="setFeaturedImage('../../assets/img/bg/daniel-olahh.jpg')">
                  <img class="h-16 w-full rounded-lg object-cover" src="../../assets/img/bg/daniel-olahh.jpg" alt="Sample">
                </button>
                <button type="button" @click="setFeaturedImage('../../assets/img/bg/joshua-earles.jpg')">
                  <img class="h-16 w-full rounded-lg object-cover" src="../../assets/img/bg/joshua-earles.jpg" alt="Sample">
                </button>
              </div>
            </div>
            <div x-show="doc.meta.featuredImage">
              <img class="h-40 w-full rounded-xl object-cover" :src="doc.meta.featuredImage" alt="Featured image">
              <div class="mt-3 flex gap-2">
                <button class="paper-btn paper-btn-outline" type="button" @click="clearFeaturedImage()">Remove</button>
                <button class="paper-btn paper-btn-primary" type="button" @click="setFeaturedImage('../../assets/img/bg/jeremy-yap.jpg')">Replace</button>
              </div>
              <div class="mt-3">
                <label class="paper-label">Alt text</label>
                <input class="paper-input" type="text" x-model="doc.meta.featuredAlt" placeholder="Describe the image">
              </div>
            </div>
          </div>
        </div>

        <div class="paper-card" x-data="collapse(false)">
          <button class="paper-card-header flex w-full items-center justify-between" type="button" @click="toggle()">
            <span class="font-semibold">Excerpt</span>
            <i class="nc-icon nc-minimal-down text-xs transition-transform" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="paper-card-body space-y-3" x-show="open" x-transition>
            <textarea class="paper-textarea" rows="4" placeholder="Write a manual excerpt" x-model="doc.meta.excerpt"></textarea>
            <button class="paper-btn paper-btn-outline" type="button" @click="generateExcerpt()">Generate from content</button>
          </div>
        </div>

        <div class="paper-card" x-data="collapse(false)">
          <button class="paper-card-header flex w-full items-center justify-between" type="button" @click="toggle()">
            <span class="font-semibold">Discussion</span>
            <i class="nc-icon nc-minimal-down text-xs transition-transform" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="paper-card-body space-y-3" x-show="open" x-transition>
            <label class="flex items-center justify-between text-sm">
              <span>Allow comments</span>
              <input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-[var(--paper-danger)]" x-model="doc.meta.settings.allowComments">
            </label>
            <label class="flex items-center justify-between text-sm">
              <span>Allow trackbacks</span>
              <input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-[var(--paper-danger)]" x-model="doc.meta.settings.allowTrackbacks">
            </label>
          </div>
        </div>
      </div>

      <div class="mt-4 space-y-4" x-show="ui.sidebarMode === 'block' && selectedBlock" x-transition>
        <div class="paper-card" x-data="collapse(true)" x-show="isTextBlock(selectedBlock.type)">
          <button class="paper-card-header flex w-full items-center justify-between" type="button" @click="toggle()">
            <span class="font-semibold">Typography</span>
            <i class="nc-icon nc-minimal-down text-xs transition-transform" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="paper-card-body space-y-4" x-show="open" x-transition>
            <div>
              <label class="paper-label">Font size</label>
              <select class="paper-select" x-model="selectedBlock.settings.fontSize">
                <option value="sm">Small</option>
                <option value="base">Medium</option>
                <option value="lg">Large</option>
                <option value="xl">Extra large</option>
              </select>
            </div>
            <div>
              <label class="paper-label">Alignment</label>
              <select class="paper-select" x-model="selectedBlock.settings.alignment">
                <option value="left">Left</option>
                <option value="center">Center</option>
                <option value="right">Right</option>
              </select>
            </div>
            <div>
              <label class="paper-label">Line height</label>
              <select class="paper-select" x-model="selectedBlock.settings.lineHeight">
                <option value="normal">Normal</option>
                <option value="relaxed">Relaxed</option>
                <option value="loose">Loose</option>
              </select>
            </div>
            <div>
              <label class="paper-label">Text color</label>
              <select class="paper-select" x-model="selectedBlock.settings.textColor">
                <option value="default">Default</option>
                <option value="muted">Muted</option>
                <option value="accent">Accent</option>
              </select>
            </div>
          </div>
        </div>

        <div class="paper-card" x-data="collapse(false)" x-show="selectedBlock.type === 'heading'">
          <button class="paper-card-header flex w-full items-center justify-between" type="button" @click="toggle()">
            <span class="font-semibold">Heading level</span>
            <i class="nc-icon nc-minimal-down text-xs transition-transform" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="paper-card-body" x-show="open" x-transition>
            <select class="paper-select" x-model="selectedBlock.settings.level">
              <option value="h1">H1</option>
              <option value="h2">H2</option>
              <option value="h3">H3</option>
              <option value="h4">H4</option>
              <option value="h5">H5</option>
              <option value="h6">H6</option>
            </select>
          </div>
        </div>

        <div class="paper-card" x-data="collapse(false)" x-show="selectedBlock.type === 'image'">
          <button class="paper-card-header flex w-full items-center justify-between" type="button" @click="toggle()">
            <span class="font-semibold">Image settings</span>
            <i class="nc-icon nc-minimal-down text-xs transition-transform" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="paper-card-body space-y-4" x-show="open" x-transition>
            <div>
              <label class="paper-label">Alignment</label>
              <select class="paper-select" x-model="selectedBlock.settings.alignment">
                <option value="left">Left</option>
                <option value="center">Center</option>
                <option value="right">Right</option>
              </select>
            </div>
            <div>
              <label class="paper-label">Alt text</label>
              <input class="paper-input" type="text" x-model="selectedBlock.settings.alt" placeholder="Describe the image">
            </div>
            <div>
              <label class="paper-label">Caption</label>
              <input class="paper-input" type="text" x-model="selectedBlock.settings.caption" placeholder="Image caption">
            </div>
          </div>
        </div>

        <div class="paper-card" x-data="collapse(false)" x-show="selectedBlock.type === 'columns'">
          <button class="paper-card-header flex w-full items-center justify-between" type="button" @click="toggle()">
            <span class="font-semibold">Layout</span>
            <i class="nc-icon nc-minimal-down text-xs transition-transform" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="paper-card-body space-y-4" x-show="open" x-transition>
            <div>
              <label class="paper-label">Columns</label>
              <select class="paper-select" x-model.number="selectedBlock.settings.columnCount" @change="columnItems(selectedBlock)">
                <option value="2">2 columns</option>
                <option value="3">3 columns</option>
                <option value="4">4 columns</option>
              </select>
            </div>
            <div>
              <label class="paper-label">Background</label>
              <select class="paper-select" x-model="selectedBlock.settings.background">
                <option value="none">None</option>
                <option value="soft">Soft</option>
              </select>
            </div>
          </div>
        </div>

        <div class="paper-card" x-data="collapse(false)" x-show="selectedBlock.type === 'buttons'">
          <button class="paper-card-header flex w-full items-center justify-between" type="button" @click="toggle()">
            <span class="font-semibold">Button settings</span>
            <i class="nc-icon nc-minimal-down text-xs transition-transform" :class="open ? 'rotate-180' : ''"></i>
          </button>
          <div class="paper-card-body space-y-4" x-show="open" x-transition>
            <div>
              <label class="paper-label">Style</label>
              <select class="paper-select" x-model="selectedBlock.settings.variant">
                <option value="primary">Primary</option>
                <option value="outline">Secondary</option>
              </select>
            </div>
            <div>
              <label class="paper-label">Link</label>
              <input class="paper-input" type="text" x-model="selectedBlock.settings.link" placeholder="https://">
            </div>
          </div>
        </div>
      </div>
    </aside>
  </div>
</section>



      </main>
      <footer class="px-6 py-6 text-xs text-[var(--paper-muted)]">
        <div class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
          <p>Paper Dashboard 2 Tailwind build. All rights reserved.</p>
          <div class="flex gap-4">
            <a href="#" class="hover:text-[var(--paper-text)]">About</a>
            <a href="#" class="hover:text-[var(--paper-text)]">Documentation</a>
            <a href="#" class="hover:text-[var(--paper-text)]">Support</a>
          </div>
        </div>
      </footer>
    </div>
  </div>
</body>
</html>
